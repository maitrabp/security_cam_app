(this.webpackJsonpsecurity_cam_app=this.webpackJsonpsecurity_cam_app||[]).push([[0],{247:function(e,t,n){e.exports=n(275)},252:function(e,t,n){},258:function(e,t){},259:function(e,t){},267:function(e,t){},270:function(e,t){},271:function(e,t){},272:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},273:function(e,t,n){},275:function(e,t,n){"use strict";n.r(t);var r=n(41),a=n.n(r),c=n(181),o=n.n(c),u=(n(252),n(18)),s=n(5),i=n.n(s),l=n(13),d=n(8),m=n(246),f=(n(274),n(272),n(273),function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(r.useRef)(null),s=Object(r.useRef)(null),f=Object(r.useRef)(null),b=Object(r.useRef)(null),p=Object(r.useRef)([]),v=Object(r.useRef)(null),g=Object(r.useRef)(!1),h=Object(r.useRef)(!1);function w(){return E.apply(this,arguments)}function E(){return(E=Object(l.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.current){e.next=3;break}return j(),e.abrupt("return");case 3:return e.next=5,b.current.detect(o.current);case 5:for(t=e.sent,n=!1,r=0;r<t.length;r++)"person"==t[r].class&&(console.log(JSON.stringify(t[r])),n=!0);n?(O(),p.current.push(!0)):p.current.filter(Boolean).length?(O(),p.current.push(!1)):j(),p.current=p.current.slice(Math.max(p.current.length-10,0)),requestAnimationFrame((function(){w()}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){h.current||(h.current=!0,console.log("start recording"),v.current=new MediaRecorder(window.stream),v.current.ondataavailable=function(e){var t=new Date+"",n=URL.createObjectURL(e.data);c((function(e){return[].concat(Object(u.a)(e),[{href:n,title:t}])}))},v.current.start())}function j(){h.current&&(h.current=!1,v.current.stop(),console.log("Stopped recording"),p.current=[])}return Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.current.setAttribute("disabled",!0),f.current.setAttribute("disabled",!0),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){e.next=19;break}return e.prev=3,e.next=6,navigator.mediaDevices.getUserMedia({audio:!0,video:!0});case 6:return t=e.sent,window.stream=t,o.current.srcObject=t,e.next=11,m.a();case 11:n=e.sent,b.current=n,s.current.removeAttribute("disabled"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[3,16]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),a.a.createElement("div",{className:"p-3"},a.a.createElement("div",null,a.a.createElement("video",{autoPlay:!0,playsInline:!0,muted:!0,ref:o})),a.a.createElement("div",{className:"btn-toolbar",role:"toolbar"},a.a.createElement("div",{className:"btn-group mr-2",role:"group"},a.a.createElement("button",{className:"btn btn-success",onClick:function(){g.current=!0,f.current.removeAttribute("disabled"),s.current.setAttribute("disabled",!0),w()},ref:s},"Start")),a.a.createElement("div",{className:"btn-group mr-2",role:"group"},a.a.createElement("button",{className:"btn btn-danger",onClick:function(){g.current=!1,s.current.removeAttribute("disabled"),f.current.setAttribute("disabled",!0),j()},ref:f},"Stop"))),a.a.createElement("div",{className:"row p-3"},a.a.createElement("h3",null,"Records:"),n.length?n.map((function(e){return a.a.createElement("div",{className:"card mt-3 w-100",key:e.title},a.a.createElement("div",{className:"card-body"},a.a.createElement("h5",{className:"card-title"},e.title),a.a.createElement("video",{controls:!0,src:e.href})))})):null))}),b=f;o.a.render(a.a.createElement(f,null),document.getElementById("root"));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[247,1,2]]]);
//# sourceMappingURL=main.f97ad77a.chunk.js.map