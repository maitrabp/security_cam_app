(this.webpackJsonpsecurity_cam_app=this.webpackJsonpsecurity_cam_app||[]).push([[0],{247:function(e,t,r){e.exports=r(275)},252:function(e,t,r){},258:function(e,t){},259:function(e,t){},267:function(e,t){},270:function(e,t){},271:function(e,t){},272:function(e,t,r){e.exports=r.p+"static/media/logo.5d5d9eef.svg"},273:function(e,t,r){},275:function(e,t,r){"use strict";r.r(t);var n=r(41),a=r.n(n),c=r(188),o=r.n(c),u=(r(252),r(18)),s=r(5),i=r.n(s),l=r(13),d=r(8),m=r(246),f=(r(274),r(272),r(273),function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),r=t[0],c=t[1],o=Object(n.useRef)(null),s=Object(n.useRef)(null),f=Object(n.useRef)(null),b=Object(n.useRef)(null),p=Object(n.useRef)([]),v=Object(n.useRef)(null),h=Object(n.useRef)(!1),g=Object(n.useRef)(!1);function w(){return E.apply(this,arguments)}function E(){return(E=Object(l.a)(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.current){e.next=3;break}return j(),e.abrupt("return");case 3:return e.next=5,b.current.detect(o.current);case 5:for(t=e.sent,r=!1,n=0;n<t.length;n++)"person"==t[n].class&&(console.log(JSON.stringify(t[n])),r=!0);r?(O(),p.current.push(!0)):p.current.filter(Boolean).length?(O(),p.current.push(!1)):j(),p.current=p.current.slice(Math.max(p.current.length-10,0)),requestAnimationFrame((function(){w()}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){g.current||(g.current=!0,console.log("start recording"),v.current=new MediaRecorder(window.stream),v.current.ondataavailable=function(e){var t=new Date+"",r=URL.createObjectURL(e.data);c((function(e){return[].concat(Object(u.a)(e),[{href:r,title:t}])}))},v.current.start())}function j(){g.current&&(g.current=!1,v.current.stop(),console.log("Stopped recording"),p.current=[])}return Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.current.setAttribute("disabled",!0),f.current.setAttribute("disabled",!0),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){e.next=19;break}return e.prev=3,e.next=6,navigator.mediaDevices.getUserMedia({audio:!0,video:!0});case 6:return t=e.sent,window.stream=t,o.current.srcObject=t,e.next=11,m.a();case 11:r=e.sent,b.current=r,s.current.removeAttribute("disabled"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[3,16]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),a.a.createElement("div",{className:"p-3"},a.a.createElement("div",null,a.a.createElement("video",{autoPlay:!0,playsInline:!0,muted:!0,ref:o})),a.a.createElement("div",{className:"btn-toolbar",role:"toolbar"},a.a.createElement("div",{className:"btn-group mr-2",role:"group"},a.a.createElement("button",{className:"btn btn-success",onClick:function(){h.current=!0,f.current.removeAttribute("disabled"),s.current.setAttribute("disabled",!0),w()},ref:s},"Start")),a.a.createElement("div",{className:"btn-group mr-2",role:"group"},a.a.createElement("button",{className:"btn btn-danger",onClick:function(){h.current=!1,s.current.removeAttribute("disabled"),f.current.setAttribute("disabled",!0),j()},ref:f},"Stop"))),a.a.createElement("div",{className:"row p-3"},a.a.createElement("h3",null,"Records:"),r.length?r.map((function(e){return a.a.createElement("div",{className:"card mt-3 w-100",key:e.title},a.a.createElement("div",{className:"card-body"},a.a.createElement("h5",{className:"card-title"},e.title),a.a.createElement("video",{controls:!0,src:e.href})))})):null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[247,1,2]]]);
//# sourceMappingURL=main.c5fdc8bc.chunk.js.map